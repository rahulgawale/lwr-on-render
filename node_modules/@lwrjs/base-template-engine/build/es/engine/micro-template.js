/* eslint-disable @typescript-eslint/no-explicit-any */
// Ported and inspired by from https://github.com/sindresorhus/pupa/blob/master/index.js
// The semantics of double and triple brackets follow handlebars.
import { htmlEscape } from 'escape-goat';
export default function template(template, data) {
    if (typeof template !== 'string') {
        throw new TypeError(`Expected a \`string\` in the first argument, got \`${typeof template}\``);
    }
    if (typeof data !== 'object') {
        throw new TypeError(`Expected an \`object\` or \`Array\` in the second argument, got \`${typeof data}\``);
    }
    const triplebraceRegex = /{{{(.*?)}}}/g;
    if (triplebraceRegex.test(template)) {
        template = template.replace(triplebraceRegex, (_, key) => {
            let result = data;
            for (const property of key.split('.')) {
                result = result && result[property] ? result[property] : '';
            }
            return String(result);
        });
    }
    const doubleBraceRegex = /{{(.*?)}}/g;
    if (doubleBraceRegex.test(template)) {
        template = template.replace(doubleBraceRegex, (_, key) => {
            let result = data;
            for (const property of key.split('.')) {
                result = result && result[property] ? result[property] : '';
            }
            return htmlEscape(String(result));
        });
    }
    return template;
}
//# sourceMappingURL=micro-template.js.map