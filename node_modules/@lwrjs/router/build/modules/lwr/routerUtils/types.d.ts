import type { Key, PathFunction } from './pathToRegexp';
import type { ContextId } from 'lwr/navigationContext';
import { Unsubscriber } from 'lwr/observable';
export declare type Module = Record<string | symbol | number, unknown>;
export declare type Constructor<T = object> = new (...args: any[]) => T;
export interface Constructable<T = object> {
    constructor: Constructor<T>;
}
export declare type UrlMapper<TAddress> = {
    generateUrl(address: TAddress): string | null;
    parseUrl(url: string): TAddress | null;
};
export declare type RouteMatcher<TAddress> = {
    matchRoute(address: TAddress): RoutingMatch | null;
};
export declare type ViewMapper<TAddress> = {
    navigate(address: TAddress): void;
    subscribe(callback: RouteCallback, replay?: boolean): Unsubscriber;
    resolveView(address: TAddress): Promise<RouteDestination>;
    contextId?: ContextId;
};
export declare type Router<TAddress = string> = ViewMapper<TAddress> & UrlMapper<TAddress> & RouteMatcher<TAddress>;
export interface DEPRECATED_getRouteFromUrl {
    <TAddress>(url: string, defaultImpl: Function): TAddress | null;
}
export interface DEPRECATED_getUrlFromRoute {
    <TAddress>(route: TAddress, defaultImpl: Function): string | null;
}
export declare type RouterConfig = {
    basePath?: string;
    routes?: RouteDefinition[];
    caseSensitive?: boolean;
    DEPRECATED_getRouteFromUrl?: DEPRECATED_getRouteFromUrl;
    DEPRECATED_getUrlFromRoute?: DEPRECATED_getUrlFromRoute;
};
export declare type RouterSerializationConfig<TAddress> = Required<Omit<RouterConfig, 'DEPRECATED_getRouteFromUrl' | 'DEPRECATED_getUrlFromRoute'> & UrlMapper<TAddress>>;
export declare type RouteParameterPatterns = {
    [paramName: string]: string;
};
export interface RouteDefinition<TMetadata = Record<string, any>> {
    id: string;
    uri: string;
    patterns?: RouteParameterPatterns;
    exact?: boolean;
    page: Partial<PageReference>;
    handler: () => Promise<RouteHandlerModule>;
    metadata?: TMetadata;
}
export declare type PageBindings = {
    attributeBindings: NullableStringAttributes;
    stateBindings: NullableStringAttributes;
};
declare type CompiledQueryResult = {
    literalValue?: string | null;
    routeParamName?: string;
};
export declare type CompiledQuery = Record<string, CompiledQueryResult>;
declare type MatchedQueryResult = {
    value: string | null;
    routeParamName?: string;
};
export declare type MatchedQuery = Record<string, MatchedQueryResult>;
export declare type QueryMatcher = (queryObject: QueryObject) => MatchedQuery | null;
export interface CompiledRouteDefinition {
    original: RouteDefinition;
    regex: RegExp;
    params: Key[];
    toPath: PathFunction<object>;
    compiledQuery: CompiledQuery;
    queryMatcher: QueryMatcher;
}
export declare type RouteHandlerCallback = (routeDestination: RouteDestination) => void;
export declare type RouteHandlerClass = {
    new (callback: RouteHandlerCallback): RouteHandler;
};
export declare type RouteHandlerModule = {
    default: RouteHandlerClass;
};
export interface RouteInstance {
    id: string;
    attributes: NullableStringAttributes;
    state: NullableStringAttributes;
    pageReference: PageReference;
}
export declare type RouteDestination = {
    viewset: ViewSet;
};
export declare type RoutingMatch = {
    pathMatch: string;
    route: RouteInstance;
    routeDefinition: RouteDefinition;
};
export interface CompiledRoutingMatch {
    route: RouteInstance;
    routeDefinition: CompiledRouteDefinition;
}
export declare type RoutingResult = RoutingMatch & {
    viewset: ViewSet;
};
export interface ViewSet {
    [viewName: string]: (() => Promise<Module>) | ViewInfo;
}
export interface ViewInfo {
    module: () => Promise<Module>;
    specifier: string;
}
export declare type RouteCallback = (result: RoutingResult) => void;
export interface RouteHandler {
    dispose(): void;
    update(routeInfo: RouteInstance): void;
}
export interface PageReference {
    type: string;
    attributes: NullableStringAttributes;
    state: NullableStringAttributes;
}
export interface MessageObject {
    code: string | number;
    message: string;
    level: number;
    stack?: string;
    url?: string;
    address?: string;
}
export declare type QueryObject = NullableStringAttributes;
export interface StringAttributes {
    [key: string]: string;
}
export interface NullableStringAttributes {
    [key: string]: string | null;
}
export {};
//# sourceMappingURL=types.d.ts.map