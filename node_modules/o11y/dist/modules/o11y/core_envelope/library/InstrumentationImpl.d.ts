import { LightningElement, LogPromptListener, MetricsTags, PublicSafety, SchematizedData } from 'o11y/shared';
import { Activity, ActivityApiOptions, ActivityDetail, ApiOptions, BucketMetric, DomEventApiOptions, Instrumentation, Metric, MetricsReporter, Schema, SchematizedPayload } from '../interfaces';
import { ActivityData } from '../interfaces-private';
import { onActivityError } from './ActivityImpl';
import { MetricsImpl } from './MetricsImpl';
import { NextgenImpl } from './NextgenImpl';
export declare class InstrumentationImpl implements Instrumentation, MetricsReporter {
    private readonly _nextGen;
    private readonly _name;
    protected static readonly defaultAppName = "APP_NOT_REGISTERED";
    private readonly _metrics;
    private readonly _onActivityStoppedCallback;
    protected readonly _onActivityErrorCallback: onActivityError;
    protected readonly _safety: PublicSafety;
    private readonly _simpleTextMaxLength;
    constructor(_nextGen: NextgenImpl, _name: string);
    protected _initMetrics(): MetricsImpl;
    private _incrementError;
    get name(): string;
    protected _wrapUserPayload(userSchemaOrText: Schema | string, userData: SchematizedData, onlyIfBoth?: boolean): SchematizedPayload;
    private getEffectiveRootId;
    log(userSchemaOrText: Schema | string, userData?: SchematizedData, options?: ApiOptions): void;
    protected _logInternal(loggerName: string, schema: Schema, data: SchematizedData, timestamp: number, rootId?: string): number;
    error(error: unknown, userSchemaOrText?: Schema | string, userData?: SchematizedData, options?: ApiOptions): void;
    protected _errorInternal(err: unknown, userSchemaOrText?: Schema | string, userData?: SchematizedData, activityId?: string, rootActivityId?: string): number;
    startActivity(name: string, options?: ApiOptions): Activity;
    protected _getActivityData(detail: ActivityDetail): ActivityData;
    private _handleActivityStop;
    protected _logActivity(activityData: ActivityData, startTimestamp: number, rootId?: string): void;
    private _handleActivityError;
    private _getPayloadFromProvider;
    domEvent(event: Event, handledBy: HTMLElement | LightningElement, userSchemaOrText?: Schema | string, userData?: SchematizedData, options?: DomEventApiOptions): void;
    incrementCounter(operation: string, increment?: number, hasError?: boolean, tags?: MetricsTags): void;
    trackValue(operation: string, value: number, hasError?: boolean, tags?: MetricsTags): void;
    bucketValue(operation: string, value: number, buckets?: number[], hasError?: boolean, tags?: MetricsTags): void;
    private _checkInputs;
    private _processValidationResults;
    private _traverseFields;
    getUpCounters(): Metric<number>[];
    getValueRecorders(): Metric<number[]>[];
    getBucketHistograms(): BucketMetric<number[]>[];
    registerForLogPrompt(listener: LogPromptListener): void;
    activity<T>(name: string, execute: (act: Activity) => T, options?: ActivityApiOptions): T;
    activityAsync<T>(name: string, execute: (act: Activity) => Promise<T>, options?: ActivityApiOptions): Promise<T>;
}
